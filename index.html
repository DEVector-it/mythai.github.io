<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Myth AI ‚Äî Student Mode</title>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1136294351029434"
        crossorigin="anonymous"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <style>
        /* --- General styling --- */
        body {
            font-family: 'Courier New', monospace;
            background-color: #0e0e1a;
            color: #d4af37;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            flex-direction: column;
        }

        #login-container,
        #chat-container {
            background: #1b1b2e;
            border-radius: 12px;
            width: 95%;
            max-width: 900px;
            margin: 20px auto 10px;
            padding: 20px;
            box-sizing: border-box;
            box-shadow: 0 0 20px #000;
        }

        #login-container input[type="text"],
        #login-container input[type="password"],
        #chat-container input[type="text"] {
            width: calc(100% - 24px);
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            border: none;
            font-size: 18px;
            box-sizing: border-box;
        }

        #login-container button,
        #chat-container button,
        select {
            background-color: #d4af37;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 18px;
            font-weight: bold;
            color: #0e0e1a;
            cursor: pointer;
            margin: 8px 4px 0 0;
            transition: background-color 0.3s ease;
        }

        #login-container button:hover,
        #chat-container button:hover,
        select:hover {
            background-color: #b58f20;
        }

        #chat-container {
            display: none;
            flex-direction: row;
            gap: 20px;
        }

        #left-panel {
            flex: 3;
            display: flex;
            flex-direction: column;
            height: 75vh;
        }

        #aiHeader {
            font-weight: bold;
            font-size: 24px;
            margin-bottom: 6px;
        }

        #model {
            font-style: italic;
            font-size: 14px;
        }

        #chat-window {
            background: #121220;
            border-radius: 10px;
            border: 1px solid #444;
            padding: 10px;
            overflow-y: auto;
            flex-grow: 1;
            margin-bottom: 10px;
        }

        .message.user {
            text-align: right;
            color: #7ae582;
            margin: 4px 0;
        }

        .message.bot {
            text-align: left;
            font-style: italic;
            margin: 4px 0;
        }

        #controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        #user-input {
            flex-grow: 1;
            font-size: 18px;
            padding: 12px;
            border-radius: 8px;
            border: none;
        }

        #right-panel {
            flex: 1.4;
            background: #151528;
            border-radius: 12px;
            padding: 10px;
            height: 75vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        #streak,
        #leaderboard,
        #history,
        #tasks-section,
        #upload-section,
        #update-banner {
            background: #252538;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 12px;
            font-size: 14px;
            flex-shrink: 0;
        }

        #streak {
            font-weight: bold;
            text-align: center;
            user-select: none;
        }

        #leaderboard {
            flex-grow: 1;
            overflow-y: auto;
        }

        #history {
            height: 120px;
            overflow-y: auto;
        }

        #tasks-section {
            height: 180px;
            overflow-y: auto;
        }

        #upload-section {
            height: 100px;
        }

        /* Ad + Weekly update banner */
        #ad-container {
            background: #2a2a3e;
            color: white;
            padding: 12px;
            margin: 0 auto 10px;
            border-radius: 10px;
            text-align: center;
            font-size: 14px;
            max-width: 900px;
            width: 95%;
            box-sizing: border-box;
            user-select: none;
        }

        #update-banner {
            background-color: #4caf50;
            color: white;
            font-weight: bold;
            padding: 8px;
            border-radius: 8px;
            margin-top: 8px;
            text-align: center;
            display: none;
        }

        /* Footer */
        footer {
            text-align: center;
            margin: 15px auto 25px;
            color: #888;
            font-size: 14px;
            user-select: none;
        }

        /* Modal styles */
        #modal-bg {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        #modal {
            background: #1b1b2e;
            color: #d4af37;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 0 20px #000;
            position: relative;
            text-align: center;
        }

        #modal h2 {
            margin-top: 0;
        }

        #modal input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border-radius: 6px;
            border: none;
            margin: 10px 0;
            box-sizing: border-box;
        }

        #modal button {
            width: 100%;
            padding: 14px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            margin-top: 10px;
            cursor: pointer;
            border: none;
            background-color: #d4af37;
            color: #0e0e1a;
        }

        #modal .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: transparent;
            color: #d4af37;
            font-size: 24px;
            border: none;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 800px) {
            #chat-container {
                flex-direction: column;
                height: auto;
            }

            #left-panel,
            #right-panel {
                flex: unset;
                height: auto;
                width: 100%;
            }

            #right-panel {
                margin-top: 15px;
            }
        }
    </style>
</head>

<body>

    <!-- Login Section -->
    <div id="login-container">
        <h2>Welcome to Myth AI</h2>
        <input type="text" id="username" placeholder="Enter your name" autocomplete="username" />
        <input type="password" id="password" placeholder="Enter a password" autocomplete="current-password" />
        <input type="text" id="ai-name" placeholder="Name your AI (e.g., Myth, Echo)" />
        <button onclick="startChat()">Start</button>
    </div>

    <!-- Chat Container -->
    <div id="chat-container">
        <div id="left-panel">
            <div><strong id="aiHeader">Myth AI</strong> (<span id="model">MythGPT 0.5</span>)</div>
            <div id="chat-window" aria-live="polite" aria-atomic="false"></div>

            <div id="controls">
                <input type="text" id="user-input" placeholder="Ask or teach something..." autocomplete="off" />
                <button onclick="sendMessage()">Send</button>
                <select id="costume" onchange="changeCostume()" aria-label="Change AI costume">
                    <option value="classic">Classic</option>
                    <option value="ninja">Ninja</option>
                    <option value="future">Future</option>
                </select>
                <button onclick="switchModel()">Switch Model</button>
                <button onclick="openModal()">Payment / Codes</button>
                <button onclick="removeAccount()" style="background:#b03030;color:#fff;">Remove Account</button>
            </div>
        </div>

        <div id="right-panel">
            <div id="streak">üî• Daily Streak: 0 day(s)</div>
            <div id="leaderboard"><strong>üèÜ Leaderboard:</strong><br>Loading...</div>
            <div id="history"><strong>Your Chats:</strong><br>Loading...</div>
            <div id="tasks-section">
                <strong>üéØ Tasks</strong>
                <ul id="tasks-list" style="list-style-type:none; padding-left:0; margin-top:8px;">
                    <!-- Tasks will be listed here -->
                </ul>
            </div>
            <div id="upload-section">
                <strong>üìÅ Upload Document (task reward)</strong><br />
                <input type="file" id="file-upload" />
                <button onclick="handleUpload()">Upload</button>
                <div id="upload-status" style="margin-top:6px;"></div>
            </div>
        </div>
    </div>

    <!-- Ad + Weekly Update -->
    <div id="ad-container" aria-live="polite" aria-atomic="true">
        Ad space ‚Äî place your ad here!
        <div id="update-banner">üÜï New Update Available! Check back every Saturday for fresh content.</div>
    </div>

    <!-- Modal for Payment / Codes -->
    <div id="modal-bg" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div id="modal">
            <button class="close-btn" onclick="closeModal()" aria-label="Close modal">√ó</button>
            <h2 id="modal-title">Unlock Upgrades</h2>
            <p>Enter a secret code to unlock special AI models or buy upgrades:</p>
            <input type="text" id="code-input" placeholder="Enter code here" autocomplete="off" />
            <button onclick="submitCode()">Submit Code</button>
            <hr />
            <p>Or support Myth AI by buying upgrades:</p>
            <button onclick="buyUpgrade('mythflash')">Buy MythFlash 2 ($4.99)</button>
            <button onclick="buyUpgrade('mythgpt2')">Buy MythGPT 2.0 ($2.99)</button>
        </div>
    </div>

    <footer>
        Update 5.0.0 ‚Ä¢ Made by Myth<br>
        <a href="#privacy-policy" style="color:#888;text-decoration:underline;">Privacy Policy</a>

    </footer>

    <script>
        // Data stores
        const memory = JSON.parse(localStorage.getItem("memory")) || {};
        const unlocked = JSON.parse(localStorage.getItem("unlocked")) || { mythgpt2: false, mythflash: false };
        const tasksDone = JSON.parse(localStorage.getItem("tasksDone")) || {};
        let username = "";
        let password = "";
        let aiName = "Myth";
        let model = "MythGPT 0.5";
        let chatLog = [];

        let currentPage = 0;
        const pageSize = 10;

        // Tasks definitions with one-time codes
        const tasks = [
            { id: "task1", text: "Teach Myth one fact (type: teach: ...)", code: "teachfact" },
            { id: "task2", text: "Upload a document to get a reward", code: "docupload" },
            { id: "task3", text: "Send 50 messages to unlock a secret code", code: "chat50" },
            { id: "task4", text: "Switch Myth's model once", code: "modelswitch" },
            { id: "task5", text: "Change Myth's costume", code: "costumechange" }
        ];

        // Start chat - login flow
        function startChat() {
            const inputName = document.getElementById("username").value.trim();
            const inputPass = document.getElementById("password").value;
            if (!inputName) return alert("Please enter your name.");
            if (!inputPass) return alert("Please enter a password.");

            username = inputName;
            password = inputPass;
            aiName = document.getElementById("ai-name").value.trim() || "Myth";

            // Save credentials locally (insecure for demo, but ok for this example)
            localStorage.setItem(`password_${username}`, password);

            document.getElementById("aiHeader").textContent = `${aiName} AI`;
            document.getElementById("login-container").style.display = "none";
            document.getElementById("chat-container").style.display = "flex";

            loadHistory();
            updateStreak();
            updateLeaderboard();
            displayTasks();
            updateWeeklyBanner();

            speak(`Hello ${username}, I am ${aiName}. How can I help you today?`);
        }

        // Remove account - clears localStorage data for this user
        function removeAccount() {
            if (!confirm("Are you sure you want to remove your account and all data? This cannot be undone.")) return;
            // Remove chat logs
            localStorage.removeItem(`chat_${username}`);
            localStorage.removeItem(`streak_${username}`);
            localStorage.removeItem(`lastVisit_${username}`);
            localStorage.removeItem(`tasksDone_${username}`);
            localStorage.removeItem(`password_${username}`);

            // Clear local vars
            username = "";
            password = "";
            chatLog = [];
            document.getElementById("chat-container").style.display = "none";
            document.getElementById("login-container").style.display = "block";
            alert("Your account and data have been removed.");
        }

        // Load chat history
        function loadHistory() {
            const saved = localStorage.getItem(`chat_${username}`);
            chatLog = saved ? JSON.parse(saved) : [];
            currentPage = getMaxPage();
            displayPage(currentPage);
            updateHistory();
        }

        // Update daily streak
        function updateStreak() {
            const today = new Date();
            const lastVisitStr = localStorage.getItem(`lastVisit_${username}`);
            let streak = parseInt(localStorage.getItem(`streak_${username}`)) || 0;

            if (lastVisitStr) {
                const lastVisit = new Date(lastVisitStr);
                const diffTime = today.getTime() - lastVisit.getTime();
                const diffDays = diffTime / (1000 * 3600 * 24);

                if (diffDays < 1) {
                    // Same day, no change
                } else if (diffDays < 2) {
                    streak++;
                } else {
                    streak = 1;
                }
            } else {
                streak = 1;
            }

            localStorage.setItem(`streak_${username}`, streak);
            localStorage.setItem(`lastVisit_${username}`, today.toISOString());
            document.getElementById("streak").innerText = `üî• Daily Streak: ${streak} day(s)`;
        }

        // Update leaderboard
        function updateLeaderboard() {
            let users = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith("chat_")) {
                    const name = key.replace("chat_", "");
                    const msgs = JSON.parse(localStorage.getItem(key)).length || 0;
                    const streak = parseInt(localStorage.getItem(`streak_${name}`)) || 0;
                    users.push({ name, msgs, streak });
                }
            }
            users.sort((a, b) => b.streak - a.streak || b.msgs - a.msgs);
            const top = users.slice(0, 5).map(u => `${u.name}: ${u.msgs} msgs, üî• ${u.streak} day streak`).join("<br>");
            document.getElementById("leaderboard").innerHTML = `<strong>üèÜ Leaderboard:</strong><br>${top || "No data yet."}`;
        }

        // Pagination helpers
        function getMaxPage() {
            return Math.max(0, Math.ceil(chatLog.length / pageSize) - 1);
        }

        function displayPage(page) {
            const chatWindow = document.getElementById("chat-window");
            chatWindow.innerHTML = "";
            const start = page * pageSize;
            const end = start + pageSize;
            const msgs = chatLog.slice(start, end);
            msgs.forEach(msg => {
                const div = document.createElement("div");
                div.textContent = msg;
                div.className = msg.startsWith(username + ":") ? "message user" : "message bot";
                chatWindow.appendChild(div);
            });
            // Scroll bottom if last page
            if (page === getMaxPage()) {
                chatWindow.scrollTop = chatWindow.scrollHeight;
            }
        }

        // Update history sidebar
        function updateHistory() {
            const histBox = document.getElementById("history");
            histBox.innerHTML = '<strong>Your Chats:</strong><br>' + chatLog.slice(-5).join("<br>");
        }

        // Append message to chat
        function appendMessage(text, sender) {
            const prefix = sender === 'user' ? `${username}: ` : `${aiName}: `;
            chatLog.push(prefix + text);
            localStorage.setItem(`chat_${username}`, JSON.stringify(chatLog));
            displayPage(getMaxPage());
            updateHistory();
            updateLeaderboard();
            checkMessageCountTasks();
        }

        // Speak text aloud if supported
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utter = new SpeechSynthesisUtterance(text);
                utter.lang = "en-US";
                speechSynthesis.speak(utter);
            }
        }

        // Respond to user input
        function respond(input) {
            input = input.toLowerCase();

            // Teach fact format: teach: mitochondria is powerhouse
            if (input.startsWith("teach:")) {
                const fact = input.slice(6).trim();
                const [key, ...valParts] = fact.split(" is ");
                if (key && valParts.length) {
                    memory[key.trim()] = valParts.join(" is ").trim();
                    localStorage.setItem("memory", JSON.stringify(memory));
                    completeTask("task1");
                    return botReply(`Got it! I'll remember that.`);
                }
                return botReply("Please teach in format: teach: mitochondria is the powerhouse of the cell");
            }

            // Lookup memory
            if (memory[input]) {
                return botReply(memory[input]);
            }

            // Secret codes
            if (input === "mythstarter") {
                unlocked.mythgpt2 = true;
                localStorage.setItem("unlocked", JSON.stringify(unlocked));
                alert("üîì You unlocked MythGPT 2.0!");
                return botReply("üîì You unlocked MythGPT 2.0!");
            }

            if (input === "buy mythflash 2") {
                unlocked.mythflash = true;
                localStorage.setItem("unlocked", JSON.stringify(unlocked));
                alert("üí∏ MythFlash 2 purchased and ready.");
                return botReply("üí∏ MythFlash 2 purchased and ready.");
            }

            return botReply("Hmm... I don't know that yet, but you can teach me!");
        }

        // Bot reply helper
        function botReply(text) {
            appendMessage(text, 'bot');
            speak(text);
        }

        // Send message event
        function sendMessage() {
            const inputElem = document.getElementById("user-input");
            const input = inputElem.value.trim();
            if (!input) return;
            appendMessage(input, 'user');
            inputElem.value = "";
            respond(input);
        }

        // Switch model cycling logic
        function switchModel() {
            if (model === "MythGPT 0.5" && unlocked.mythgpt2) {
                model = "MythGPT 2.0";
            } else if (model === "MythGPT 2.0" && unlocked.mythflash) {
                model = "MythFlash 2";
            } else {
                model = "MythGPT 0.5";
            }
            document.getElementById("model").textContent = model;
            speak(`${model} activated.`);
            completeTask("task3"); // switching model counts as a task
        }

        // Change costume
        function changeCostume() {
            const theme = document.getElementById("costume").value;
            document.body.style.backgroundColor = theme === "ninja" ? "#000" : theme === "future" ? "#0ff" : "#0e0e1a";
            speak(`Costume changed to ${theme}`);
            completeTask("task5");
        }

        // Modal open/close
        function openModal() {
            document.getElementById("modal-bg").style.display = "flex";
            document.getElementById("code-input").value = "";
        }

        function closeModal() {
            document.getElementById("modal-bg").style.display = "none";
        }

        // Submit secret code modal
        function submitCode() {
            const code = document.getElementById("code-input").value.trim().toLowerCase();
            if (!code) return alert("Please enter a code.");

            if (code === "mythstarter") {
                if (!unlocked.mythgpt2) {
                    unlocked.mythgpt2 = true;
                    localStorage.setItem("unlocked", JSON.stringify(unlocked));
                    alert("üîì You unlocked MythGPT 2.0!");
                } else {
                    alert("You already unlocked MythGPT 2.0!");
                }
                closeModal();
                updateLeaderboard();
            } else if (code === "mythflash") {
                if (!unlocked.mythflash) {
                    unlocked.mythflash = true;
                    localStorage.setItem("unlocked", JSON.stringify(unlocked));
                    alert("üí∏ MythFlash 2 unlocked!");
                } else {
                    alert("You already unlocked MythFlash 2!");
                }
                closeModal();
                updateLeaderboard();
            } else {
                alert("‚ùå Invalid code.");
            }
        }

        // Buy upgrades buttons
        function buyUpgrade(upgrade) {
            if (upgrade === "mythflash") {
                if (!unlocked.mythflash) {
                    unlocked.mythflash = true;
                    localStorage.setItem("unlocked", JSON.stringify(unlocked));
                    alert("üí∏ MythFlash 2 purchased and ready.");
                } else {
                    alert("You already own MythFlash 2!");
                }
            } else if (upgrade === "mythgpt2") {
                if (!unlocked.mythgpt2) {
                    unlocked.mythgpt2 = true;
                    localStorage.setItem("unlocked", JSON.stringify(unlocked));
                    alert("üîì MythGPT 2.0 purchased!");
                } else {
                    alert("You already own MythGPT 2.0!");
                }
            }
            closeModal();
            updateLeaderboard();
        }

        // Tasks management
        function displayTasks() {
            const list = document.getElementById("tasks-list");
            list.innerHTML = "";
            let done = JSON.parse(localStorage.getItem(`tasksDone_${username}`)) || {};
            tasks.forEach(task => {
                const li = document.createElement("li");
                li.style.marginBottom = "8px";
                if (done[task.id]) {
                    li.textContent = "‚úÖ " + task.text + " (Code: " + task.code + ")";
                } else {
                    li.textContent = "‚¨ú " + task.text;
                }
                list.appendChild(li);
            });
        }

        // Mark task complete and save
        function completeTask(taskId) {
            let done = JSON.parse(localStorage.getItem(`tasksDone_${username}`)) || {};
            if (!done[taskId]) {
                done[taskId] = true;
                localStorage.setItem(`tasksDone_${username}`, JSON.stringify(done));
                displayTasks();
                alert(`üéâ You completed a task! Here's your one-time code: ${tasks.find(t => t.id === taskId).code}`);
            }
        }

        // Upload document handler with reward
        function handleUpload() {
            const fileInput = document.getElementById("file-upload");
            const status = document.getElementById("upload-status");
            if (fileInput.files.length === 0) {
                status.textContent = "Please select a file to upload.";
                return;
            }

            // Simulate upload & reward
            status.textContent = "Uploading...";
            setTimeout(() => {
                status.textContent = `Upload complete: ${fileInput.files[0].name}`;
                completeTask("task2");
                fileInput.value = "";
            }, 1500);
        }

        // Check if user has sent 50+ messages for task and banner
        function checkMessageCountTasks() {
            const count = chatLog.length;
            if (count >= 50) {
                completeTask("task3");
                showWeeklyUpdateBanner();
            }
        }

        // Show or hide weekly update banner (only on Saturday and if 50+ messages)
        function updateWeeklyBanner() {
            const banner = document.getElementById("update-banner");
            const adContainer = document.getElementById("ad-container");
            const today = new Date();
            const day = today.getDay(); // 6 = Saturday
            const msgCount = chatLog.length;

            if (day === 6 && msgCount >= 50) {
                banner.style.display = "block";
            } else {
                banner.style.display = "none";
            }
        }

        function showWeeklyUpdateBanner() {
            const banner = document.getElementById("update-banner");
            banner.style.display = "block";
        }

        // Load saved password for user and verify (optional simple check)
        function verifyPassword(name, pass) {
            const savedPass = localStorage.getItem(`password_${name}`);
            return savedPass === pass;
        }

        // Keyboard Enter to send message
        document.getElementById("user-input").addEventListener("keydown", function (e) {
            if (e.key === "Enter") sendMessage();
        });

        // On login press enter in password field
        document.getElementById("password").addEventListener("keydown", function (e) {
            if (e.key === "Enter") startChat();
        });

        // On username enter move to password
        document.getElementById("username").addEventListener("keydown", function (e) {
            if (e.key === "Enter") document.getElementById("password").focus();
        });

        // Initial page setup for new users - hide update banner
        updateWeeklyBanner();

    </script>
    <!-- Privacy Policy -->
    <section id="privacy-policy"
        style="background:#1b1b2e;color:#d4af37;padding:20px;margin:30px auto;max-width:900px;border-radius:12px;">
        <h2 style="text-align:center;">Privacy Policy</h2>
        <p>
            This website uses Google AdSense to display advertisements. Google and its partners may use cookies to
            personalize ads based on your prior visits to this and other websites.
        </p>
        <p>
            <strong>What does this mean?</strong> Third-party vendors, including Google, use cookies to serve ads based
            on your previous interactions.
            Google's use of advertising cookies enables it and its partners to serve ads to you based on your visit to
            this site and/or other sites on the Internet.
        </p>
        <p>
        
    </section>
</body>

</html>
